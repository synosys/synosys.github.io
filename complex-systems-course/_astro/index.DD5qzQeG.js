import{s as A,j as n,t as L}from"./transform.D34fbgXt.js";import{l as R,a as M,b as T,c as Y,u as D,m as f,p as X,f as G,d as H}from"./map.Crg4iWOe.js";import{r as g}from"./index.BVOCwoKb.js";import{s as i}from"./styles_module.958d8399.7dQe8EHB.js";import{r as I}from"./range.DLCk2Tlt.js";import{n as J,f as K}from"./forEach.Dps42lNb.js";import{l as $}from"./last.DXTTfs9a.js";const t={container:{class:"flex flex-col "},display:{width:600,height:300,class:"p-0  mb-0 w-full h-auto "},controls:{width:600,height:170,class:"d3-widgets p-0  mb-0 w-full h-auto ",grid:{x:12,y:12}},widgets:{slider_size:500,slider_girth:10,slider_knob:12,slider_fontsize:18,sliders:[{id:"sigma",label:"noise strength",range:[0,2],value:.5,position:{x:1,y:2.5}},{id:"k",label:"force strength",range:[0,10],value:.5,position:{x:1,y:6}}],buttons:[{id:"play_pause",actions:["play","pause"],value:0,position:{x:4,y:9.5}},{id:"reset",actions:["rewind"],value:0,position:{x:8,y:9.5}}]},plot:{margin:{l:30,r:30,t:10,b:30},xr:[0,10],yr:[-5,5],xaxis:{label:"t",label_position:{x:280,y:190},fontsize:"16px"},yaxis:{label:"X(t)",label_position:{x:175,y:20},fontsize:"16px"}}},o=.01,O=10,k=t.plot.xr[1];var l=t.plot.xr;const P=t.plot.yr,d=R().domain(l).range([t.plot.margin.l,t.display.width-t.plot.margin.r]),w=R().domain(P).range([t.display.height-t.plot.margin.b,t.plot.margin.t]),y=M(d),Q=T(w),E=Y().x(e=>d(e.t)).y(e=>w(e.X));var c=[],x=0,N={};const S=J(0,1);function at({id:e}){const B=g.useRef(null),b=g.useRef(null),v=g.useRef(null);return g.useEffect(()=>{console.log(c);const j=D(t.controls.width,t.controls.height,t.controls.grid.x,t.controls.grid.y),a=A(b.current),u=A(v.current),C=()=>{x++;let s=h[1].value(),m=h[0].value();K(c,r=>{let q=$(r.trajectory).t,_=$(r.trajectory).X;r.trajectory.push({t:q+o,X:_-s*o*_+Math.sqrt(m*o)*S()}),x>k/o/2&&r.trajectory.shift()}),x>k/o/2&&(l=[l[0]+o,l[1]+o],d.domain(l),a.select("#xaxis").call(y)),a.selectAll("."+i.agent).data(c).attr("d",r=>E(r.trajectory))},z=()=>{x=0,c=f(I(O),(s,m)=>({id:m,trajectory:[{t:0,X:0}]})),l=t.plot.xr,d.domain(l),a.select("#xaxis").call(y),a.selectAll("."+i.agent).remove(),a.selectAll("."+i.agent).data(c).enter().append("path").attr("d",s=>E(s.trajectory)).attr("class",i.agent).classed(i.singular,s=>s.id==0)},p=f(t.widgets.buttons,s=>G().id(s.id).value(s.value).actions(s.actions).position(j.position(s.position.x,s.position.y))),h=f(t.widgets.sliders,s=>H().id(s.id).label(s.label).range(s.range).value(s.value).fontsize(t.widgets.slider_fontsize).size(t.widgets.slider_size).girth(t.widgets.slider_girth).knob(t.widgets.slider_knob).position(j.position(s.position.x,s.position.y)));z();function F(s){p[0].value()==1?N=L(C,0):N.stop()}return p[0].update(F),p[1].update(z),u.selectAll(null).data(p).enter().append(X),u.selectAll(null).data(h).enter().append(X),a.append("g").datum(t.plot.xaxis).attr("class",i.axis).attr("id","xaxis").attr("transform",function(s){return"translate(0,"+w(0)+")"}).call(y).style("font-size",t.plot.xaxis.fontsize),a.append("g").datum(t.plot.yaxis).attr("class",i.axis).attr("transform",function(s){return"translate("+d(0)+",0)"}).call(Q).style("font-size",t.plot.xaxis.fontsize),()=>{u.selectAll("*").remove(),a.selectAll("*").remove()}},[e]),n.jsx(n.Fragment,{children:n.jsxs("div",{ref:B,id:e,className:t.container.class,children:[n.jsx("svg",{ref:b,id:`${e}-display`,className:t.display.class,width:t.display.width,height:t.display.height,viewBox:`0 0 ${t.display.width} ${t.display.height}`}),n.jsx("svg",{ref:v,id:`${e}-controls`,className:t.controls.class,width:t.controls.width,height:t.controls.height,viewBox:`0 0 ${t.controls.width} ${t.controls.height}`})]})})}export{at as default};
