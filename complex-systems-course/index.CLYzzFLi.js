import{s as v,j as i,t as S}from"./transform.D34fbgXt.js";import{e as T,l as y,a as M,b as q,c as k,m as A,u as X,p as Y,f as _}from"./map.Crg4iWOe.js";import{r as u}from"./index.BVOCwoKb.js";import{s as n}from"./styles_module.dc4ac588.DhkYejGA.js";import{r as F}from"./range.DLCk2Tlt.js";import{n as D,f as G}from"./forEach.Dps42lNb.js";function H(a,r){for(var e,m=-1,w=a.length;++m<w;){var g=r(a[m]);g!==void 0&&(e=e===void 0?g:e+g)}return e}var J=NaN;function K(a,r){var e=a==null?0:a.length;return e?H(a,r)/e:J}function z(a,r){return K(a,T(r))}const t={container:{class:"explorable flex flex-col items-center"},display:{width:500,height:500,class:"gront w-[50%] mb-0 h-auto",margin:{l:20,r:50,t:20,b:50},fontsize:"20px",xr:[-100,100],yr:[-100,100]},plot:{width:500,height:500,class:"mb-0 w-[50%] h-auto",margin:{l:50,r:30,t:20,b:50},fontsize:"20px",xr:[0,1e3],yr:[0,40]},controls:{width:200,height:100,class:"d3-widgets p-0 mb-0 h-auto",grid:{x:6,y:6}},widgets:{buttons:[{id:"play_pause",actions:["play","pause"],value:0,position:{x:1,y:3}},{id:"reset",actions:["rewind"],value:0,position:{x:5,y:3}}]}},$=1e3;var C={};const d=y().domain(t.display.xr).range([t.display.margin.l,t.display.width-t.display.margin.r]),h=y().domain(t.display.yr).range([t.display.height-t.display.margin.b,t.display.margin.t]),j=y().domain(t.plot.xr).range([t.plot.margin.l,t.plot.width-t.plot.margin.r]),N=y().domain(t.plot.yr).range([t.plot.height-t.plot.margin.b,t.plot.margin.t]),O=M(d),P=q(h),Q=M(j),U=q(N);k().x(a=>d(a.x)).y(a=>h(a.y));const b=k().x(a=>j(a.t)).y(a=>N(a.r)),E=D(0,1);var p=0,l=A(F($),a=>({id:a,x:0,y:0})),f=[{t:p,r:z(l,a=>Math.sqrt(a.x*a.x+a.y*a.y))}];function et({id:a}){const r=u.useRef(null),e=u.useRef(null),m=u.useRef(null),w=u.useRef(null);return u.useEffect(()=>{const g=X(t.controls.width,t.controls.height,t.controls.grid.x,t.controls.grid.y),o=v(r.current),R=v(m.current),c=v(e.current),x=A(t.widgets.buttons,s=>_().id(s.id).value(s.value).actions(s.actions).position(g.position(s.position.x,s.position.y)));function I(){p++,G(l,s=>{s.x+=E(),s.y+=E()}),f.push({t:p,r:z(l,s=>Math.sqrt(s.x*s.x+s.y*s.y))}),o.selectAll("."+n.agent).data(l).attr("transform",function(s){return"translate("+d(s.x)+","+h(s.y)+")"}),c.select("#msd").datum(f).attr("d",b),p>$&&B()}function B(){p=0,l=A(F($),s=>({id:s,x:0,y:0})),f=[{t:p,r:z(l,s=>Math.sqrt(s.x*s.x+s.y*s.y))}],o.selectAll("."+n.agent).data(l).attr("transform",function(s){return"translate("+d(s.x)+","+h(s.y)+")"}),c.select("#msd").datum(f).attr("d",b)}function L(s){x[0].value()==1?C=S(I,0):C.stop()}return x[0].update(L),x[1].update(B),R.selectAll(null).data(x).enter().append(Y),o.append("g").attr("transform","translate(0,"+h(0)+")").call(O).style("font-size",t.display.fontsize).attr("class",n.axis),o.append("g").attr("transform","translate("+d(0)+",0)").call(P).style("font-size",t.display.fontsize).attr("class",n.axis),o.selectAll("."+n.agent).data(l).enter().append("circle").attr("class",n.agent).attr("r","3").style("stroke","none").attr("transform",function(s){return"translate("+d(s.x)+","+h(s.y)+")"}),c.append("path").datum(f).attr("d",b).attr("id","msd").attr("class",n.plotline),c.append("g").attr("transform","translate(0,"+N(0)+")").attr("class",n.axis).call(Q).style("font-size",t.plot.fontsize),c.append("g").attr("transform","translate("+j(0)+",0)").attr("class",n.axis).call(U).style("font-size",t.plot.fontsize),()=>{R.selectAll("*").remove(),o.selectAll("*").remove(),c.selectAll("*").remove()}},[a]),i.jsx(i.Fragment,{children:i.jsxs("div",{ref:w,id:a,className:t.container.class,children:[i.jsxs("div",{className:"flex",children:[i.jsx("svg",{ref:r,id:`${a}-display`,className:t.display.class,width:t.display.width,height:t.display.height,viewBox:`0 0 ${t.display.width} ${t.display.height}`}),i.jsx("svg",{ref:e,id:`${a}-plot`,className:t.plot.class,width:t.plot.width,height:t.plot.height,viewBox:`0 0 ${t.plot.width} ${t.plot.height}`})]}),i.jsx("svg",{ref:m,id:`${a}-controls`,className:t.controls.class,width:t.controls.width,height:t.controls.height,viewBox:`0 0 ${t.controls.width} ${t.controls.height}`})]})})}export{et as default};
